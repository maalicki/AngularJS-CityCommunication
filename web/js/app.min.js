"use strict";var busStopApp=angular.module("busStopApp",["ngRoute","linesServices","ui.bootstrap"]);busStopApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/home.html",controller:"homeController"}).when("/lines",{templateUrl:"views/lines.html",controller:"linesController"}).when("/messages",{templateUrl:"views/messages.html",controller:"messagesController"}).when("/contact",{templateUrl:"views/contact.html",controller:"contactController"}).otherwise("/404",{templateUrl:"partials/404.html",controller:"contactController"})}]),busStopApp.controller("homeController",["$scope","$http",function(a,b){$('[data-toggle="tooltip"]').tooltip(),a.submit=function(){b({method:"POST",url:"../api/web/app_dev.php/getTimeTable",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({busstop:a.busstop})}).success(function(b,c,d,e){a.lines=b})},a.getLocation=function(a){return b.get("../api/web/app.php/getBusStopName",{params:{str:a,sensor:!1}}).then(function(a){return a.data.results.map(function(a){return a.name})})}}]),busStopApp.controller("linesController",["$scope","$routeParams","$http","getLines",function(a,b,c,d){a.loading=!0,c.get("../api/web/app.php/getLineTypes").success(function(b,c,d,e){a.lines=b,a.loading=!1}).error(function(a,b,c,d){console.log(b)})}]),busStopApp.controller("messagesController",["$scope","$routeParams","$http","getLines",function(a,b,c,d){function e(){c({method:"POST",url:"../api/web/app.php/getMessage",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({dayLimit:a.dayLimit})}).success(function(b,c,d,e){a.messages=b,a.loading=!1})}a.loading=!0,a.dayLimit="",e(),a.submit=function(){e()}}]),busStopApp.controller("contactController",["$scope",function(a){a.submit=function(){bootbox.alert('<br/><div class="alert alert-info" role="alert">This is <b>demo</b> app!</div><b>Name:</b> '+a.name+"<br/><b>Email:</b> "+a.email+"<br/><b>Message:</b> "+a.message+"<br/><b>Answer:</b> "+a.human+" ("+(5==a.human?"OK":"FALSE")+")")}}]);var linesServices=angular.module("linesServices",["ngResource"]);linesServices.factory("getLines",["$resource",function(a){return a("../api/web/app.php/getLineTypes",{},{query:{method:"GET",params:{busStopId:"busStopId"}}})}]);